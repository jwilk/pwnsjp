autogen_header = data/autogen-header.inc.h

autohfiles = $(wildcard cmap-*.h) $(wildcard entity*.h)

$(autohfiles): $(autogen_header)

cmap-cp1250.h: data/cmap-cp1250.gz script/cmap-decode
	cat $(autogen_header) > $(@)~
	zcat $(<) | script/cmap-decode cp1250 >> $(@)~
	mv -f $(@)~ $(@)

cmap-iso8859-2.h: data/cmap-iso8859-2.gz script/cmap-iso8859-n.h.in script/cmap-decode
	cat $(autogen_header) > $(@)~
	zcat $(<) | script/cmap-iso8859-n.h.in 2 >> $(@)~
	zcat $(<) | script/cmap-decode iso8859_2 >> $(@)~
	mv -f $(@)~ $(@)

cmap-iso8859-13.h: data/cmap-iso8859-13.gz script/cmap-iso8859-n.h.in
	cat $(autogen_header) > $(@)~
	zcat $(<) | script/cmap-iso8859-n.h.in 13 >> $(@)~
	mv -f $(@)~ $(@)

cmap-iso8859-16.h: data/cmap-iso8859-16.gz script/cmap-iso8859-n.h.in
	cat $(autogen_header) > $(@)~
	zcat $(<) | script/cmap-iso8859-n.h.in 16 >> $(@)~
	mv -f $(@)~ $(@)

cmap-usascii.h: script/cmap-usascii.h.in
	cat $(autogen_header) > $(@)~
	script/cmap-usascii.h.in >> $(@)~
	mv -f $(@)~ $(@)

entity.h: data/entities.dat script/entity.h.in
	cat $(autogen_header) > $(@)~
	script/entity.h.in < $(<) >> $(@)~
	mv -f $(@)~ $(@)

entity-hash.h: data/entities.dat script/entity-hash.h.in
	script/entity-hash.h.in < ${<} > $(@)~
	mv -f $(@)~ $(@)

.PHONY: clean-hdr
clean-hdr:
	rm -f $(autohfiles)

# vim:ts=4
