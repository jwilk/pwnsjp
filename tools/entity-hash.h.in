#!/bin/sh
(
  echo 'struct entity_ptr { const char *name; int id; };'
  echo '%%'
  grep -n -v '^%' \
  | sed -r -e 's/^([0-9]+):([^\t]+).*$/\2, \1/' -e 's/^(#.+), /"\1", /'
) | gperf -L 'ANSI-C' -c -C -F ', 0' -H entity_hash -N entity_lookup -t -m 20

# vim:ts=2 sw=2 et ft=sh
