#!/usr/bin/perl
use strict;

print <<EOF
#include <wchar.h>
#ifndef CMAP_CP1250_H
#define CMAP_CP1250_H

#ifndef ICC
static const wchar_t cp1250[0x80] = L"\\
EOF
;

my %s;
$s{$_} = '\0' foreach (0x80 .. 0xff);

while (<>)
{
  next unless m'^<U([0-9A-F]{4})> */(x[0-9a-f]{2}).*';
  my $cp = eval "0$2";
  $s{$cp} = '\u' . lc($1);
}
print $s{$_} foreach (0x80 .. 0xff);
print <<EOF
\";
#else
static const wchar_t cp1250[0x80] = L"\\
EOF
;
$s{$_} =~ s/u/x/ foreach (0x80 .. 0xff);
print $s{$_} foreach (0x80 .. 0xff);
print <<EOF
\\
";
#endif

#endif
EOF
;

# vim:ts=2 sw=2 et ft=perl
